openmp    openmp De viquip dia jump navig jump search     aquest articl secci cita le font necessita refer nci la seva verificabilitat millorau lo   openmp tipu model de programaci paral lela informaci lloc web web oficialstack exchang etiqueta openmp open multi process una interf cie de programaci aplicacion api suporta programaci multiproc amb mem ria compartida multi plataforma en c++ fortran molt arquitectur incloent le plataform unix microsoft window consisteix en conjunt de direct de compilador rutin de bibliotequ variabl entorn afecten al comporta en temp execuci definit conjunta grup del princip fabric de maquinari programari openmp model portabl escal al programador una interf cie simpl flexibl desenvolupar aplicacion paral lele plataform van de de escriptori fin al supercomputador una aplicaci constru da amb el model brid de programaci paral lela pot executar se en ra ordinador fent servir openmp messag pass interfac mpi  contingut  introducci hist ria interf cie usuari  3.1 direct de compilaci 3.2 biblioteca variabl entorn   element princip  4.1 direct vectori 4.2 creaci de thread 4.3 direct de compartici de trebal 4.4 Cl usul  4.4 Cl usul de compartici de dade 4.4 Cl usul de sincronitzaci 4.4 Cl usul de planificaci 4.4 control amb 4.4 pia de dade 4.4 distribuci sica de thread 4.4 definici del mero de thread   4.5 variabl entorn   implementacion avantatg inconveni  6.1 avantatg 6.2 inconveni   refer nci enlla os extern   introducci modifica openmp una implementaci de multithread tode de paral lelitzaci pel qual el thread fil en angl mestr una rie instruccion executad consecutiva es bifurca en nombr determinat de thread esclau la tasca es divideix entr ell el thread llavor executen concurrent amb entorn execuci ubic el thread difer processador La secci de codi es executi en paral lel marcada corresponent amb una directiva de preprocessador el thread es formin aban la secci sigui executada cada thread identificador associat pot ser obtingut fent servir una funci anomenada omp thread num c++ omp get thread num fortran de thread enter el thread mestr una de despr de execuci del codi paral lelitzat el thread uneixen de nou al thread mestr continua endav fin al final del programa per defect cada thread executa la secci de codi paral lelitzada independent Es poden fer servir construccion de compartici de trebal dividir una tasca entr el thread de forma cada thread executi la de codi assignada fent servir openmp aquesta forma es pot aconseguir tant el paral lelism de tasqu el paral lelism de dade entorn execuci assigna el thread processador depen de la rrega de la quina altr factor El nombr de thread pot ser assignat entorn execuci basant se en variabl entorn en codi fent servir funcion le funcion openmp estan inclos en fitxer de cap alera amb el nom omp c++  hist ria modifica     aquest articl secci es presenta en forma de llista hauria de redactar en forma de prosa   openmp architectur review board arb va publicar el seu primer est ndard openmp fortran 1.0 octubr de 1997 octubr de 1998 van publicar est ndard c++ 2000 va sortir la versi 2.0 de est ndard fortran 2002 va sortir la versi 2.0 de est ndard c++ 2005 va sortir la versi 2.5 est ndard combinat de c++ fotran Al maig de 2008 va sortir la versi 3.0 Al juliol de 2013 es va publicar la versi 4.5 la versi actual de le especificacion de api interf cie usuari modifica direct de compilaci modifica openmp es troben una rie de construccion de control atribut de dade estenen al llenguatg base f77 f90 c++ el compilador defect ometen aquest direct openmp si activen mitjan ant flag mp fopenmp  biblioteca variabl entorn modifica openmp disposa conjunt de funcion controlar par metr inclos la llibreria de omp Un exempl seria la definici del mero de thread mitjan ant call omp set num thread 64 per una altra banda disposa de variabl entorn permeten controlar par metr de forma difer exempl setenv omp num thread  element princip modifica el element princip openmp direct la creaci de thread distribuci de trebal gesti de dade en entorn sincronitzaci de thread rutin execuci nivel usuari variabl entorn aquest direct c++ anomenen pragma  direct vectori modifica En primer nivel podem diferenciar le direct simd vectori destinad paral lelism nivel de dade La directiva pragma omp simd indica al compilador el bucl seg ent es vectoritz segon la versi del compilador apuesta directiva pot ser ignorada el processador trobi errad en depend nci de dade impedeixin la paral lelitzaci aquest utilitzi aquesta directiva pista utilitzar instruccion vectori La directiva pragma omp declar simd indica al compilador ha de generar una versi simd una funci podr ser cridada de bucl vectoritzat per tant la funci declarada amb aquesta directiva podr tamb ser executada sens necessitat aplicar paral lelism de dade tot ho indiquem expl citament el compilador analitza el codi tracta de vectoritzar el bucl de forma autom tica sempr indiqui al compilador nivel optimitzaci adequat mitjan ant clag O3 ofast per comprobar realment el compilador ha vectoritzat bucl podem analitzar el codi quina descobrirem una al mnem nic de le instruccion assembl fet confirma la utiltzaci de paralel lism simd  creaci de thread modifica La directiva pragma omp parallel basada en model execuci fork join indica al compilador el codi ser executat difer thread creant aix una regi paral lela El thread encarregat de crear la resta anomena master amb Un cop realitzat el fork el compilador reparteix trosso iteracion del seg ent bucl al diferent thread per defect la variabl iteraci del bucl privada cada thread cal tenir en compt si especifica el contrari la resta de variabl del codi sera compartid tot el thread tamb destac tote le variabl cread interior aquesta construcci seran cread cada thread  direct de compartici de trebal modifica le direct de compartici de trebal utilitzad especificar es reparteix el trebal tot el thread  utilitzat repartir iteracion de bucl entr difer thread utilitzat distribuir bloc de codi nic thread singl especifica tro de codi ser executat nic thread amb barrier impl cit al final master especifica tro de codi ser executat nic thread ser el master No cont barrier al final Cl usul modifica Cl usul de compartici de dade modifica privat list especifica cada subproc ha de tenir la seva propia inst ncia una variabl tote le variabl privad estaran inicialitzad firstpriv list realitza la mateixa funci la cl usula privat inicialitza la variabl privada amb el valor de la variabl del thread master lastpriv list le variabl de la lista inicialitzen la variabl del thread master actualitzada amb el valor de ltima iteraci realitzar share list especifica le variabl inclos la llista compartid tot el thread default share Es pot definir share significa qualsevol variabl de la regi paral lela es tractar si estigu interior una cl usula share la variabl ser tractada privada compartida per defect el valor de la cl usula default ser share reduct reduct identifi list especifica le variabl de la llista estan subject operador de reducci sum min max count La reducci es pot implementar amb una crida funci Cl usul de sincronitzaci modifica critic El bloc de codi executa nic thread en cada moment fet evita condicion de carrera atom le actualitzacion en memoria de la seg ent instrucci executen micament dir microinstrucci microinstrucci El compilador utilitza instruccion hardwar proporcionen millor rendiment utilitz critic order El block executa en ordr en le iteracion executarien en bucl seq encial barrier cada thread espera la resta acabi la seva execuci le direct de compartici de trebal contenen barrier impl cit nowait especifica el thread acabin el trebal assignat han esperar la resta finalitzin la seva execuci En ab ncia aquesta cl usula el thread esperaran execuci de la resta Cl usul de planificaci modifica schedul type chunk utilitzat en direct de compartici de trebal definir el tode utilitzat repartir iteracion bucl entr difer thread static le iteracion del bucl assignad cada thread aban de execuci per defect le iteracion es reparteixen de forma equitativa entr tot el thread mitjan ant el par metr chunk especifiquem el nombr chunk iteracion assignarem thread dynam assignen una rie iteracion al thread quan acaben execuci obt nove iteracion realitzar El par metr chunk especifica quant iteracion assignen cada thread cada vegada guid assigna una gran quantitat iteracion cada thread va disminuint mida avan execuci aquesta manera cada thread rep meni trebal cada vegada en demana El par metr chunk indica quin es el nombr nim iteracion pot arribar rebr cada thread control amb modifica parallel scalar logic express permet establir una expressi tenera segon si evalua executar el codi de la regi paral lela en paral lel de forma seq encial respectiva pia de dade modifica copyin list realitza la mateixa funci la cl usula privat inicialitza la variabl privada amb el valor de la variabl del thread master en variabl definid mitjan ant threadpriv list permet definir variabl privad associad cada thread una regi paral lela mantindran el mateix valor cada cop el thread associat sigui creat copypriv utilitzat amb singl copiar valor object privat thread object altr thread distribuci sica de thread modifica proc bind master close spread controla el thread affin del thread La opci master obliga tot el thread del team ser assignat al mateix lloc del thread master amb opci close el thread assignat lloc proper al del thread master En ca sigui spread el thread assignen de forma dispersa definici del mero de thread modifica num tread scalar integ express permet definir el nombr de thread executaran el codi de la regi paral lela variabl entorn modifica le variabl entorn tode alterar le caract stiqu execuci de le aplicacion utilitzen openmp exempl el mero de thread es crearan defect le region paral lele mitjan ant omp num thread  implementacion modifica compilador amb implementaci openmp 3.0  gcc 4.3 compilador mercurium compilador intel fortran c++ version 11.0 11.1 intel c++ fortran compos XE 2011 intel parallel studio compilador ibm XL c++ actualitzaci de sun studio 12 una implementaci completa openmp 3.0 nombroso compilador soporten openmp 3.1  gcc 4.7 compilador intel fortran c++ 12.1 llvm clang 3.7 difer compilador soporten openmp 4.0  gcc 4.9 c++ gcc 4.9 fortran compilador intel fortran c++ 15.0 llvm clang 3.7 partial compilador auto paral lelitzador generen codi font amb direct openmp  ipat omp parallwar pluto rose compil framework s2p kpit cummin infosystem ltd diverso profil debugg tamb soporten openmp  allinea distribut debug tool ddt allinea map ompp vampir avantatg inconveni modifica avantatg modifica codi multithread portabl simpl ja necessita pa de missatg mpi La descomposici de dade es gestionada direct autom ticament escalabilitat si ho comparem amb mpi en sistem de mem ria compartida pot treballar nom en una del programa necessita el codi origin sigui modificat pel es redueix la probabilitat introduir bug codi unificat aplicacion rie paral lele le direct openmp tractad comentari si especifica el flag correspon permet paral lelism amb granularitat fina gruixuda depen de le necessitat entorn de cada aplicaci pot ser utilitzat en accelerador gpgpu inconveni modifica risc introduir bug en debug condicion de carrera La seva execuci nom es efici en multiprocessador amb mem ria compartida necessita compilador suporti openmp gcc icc en serien bon exempl escalabilitat es superior la de mpi ve determinada arquitectura de memoria No suport compar swap No bon tractament error reduir el rendiment cilment amb compartit fal fals share refer nci modifica   openmp fortran 1.0  openmp c++ 1.0 en angl  openmp fortran 2.0  openmp c++ 2.0 en angl  openmp c++ fortran 2.5 en angl  openmp c++ fortran 3.0 en angl  openmp c++ fortran 4.5 en angl  openmp compil openmp en en gb consulta 14 juliol 2017   enlla os extern modifica openmp lloc web ofici angl gnu gomp angl project de suport openmp c++ fortran al compilador de la gnu compil collect en funciona de de la versi gcc 4.2 openmp visual c++ angl jomp openmp java angl presentaci angl univ erlangen openmp java cuda angl implementaci linux export codi ser executat gpu amb api cuda de nvidia articl gui  openmp more just optim loop angl guia de openmp angl      obtingut de http wikipedia org php titl openmp oldid 19082006 categori apillenguatg de programaci categori ocult articl sens refer nci de de mar de 2017articl amb llist passar prosa  